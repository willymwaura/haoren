<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WhatsApp Checkout Modal</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    /* Dark overlay */
    .overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 999;
    }

    /* Modal box */
    .modal {
      background: #f9fcff;
      border-radius: 8px;
      padding: 20px;
      width: 90%;
      max-width: 700px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      animation: fadeIn 0.3s ease;
    }

    .modal h2 {
      margin-top: 0;
      font-size: 1.5em;
      color: #333;
    }

    .modal .section {
      margin: 15px 0;
    }

    .modal input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-top: 5px;
    }

    .modal .actions {
      display: flex;
      justify-content: flex-end;
      margin-top: 20px;
      gap: 10px;
    }

    .btn {
      padding: 10px 18px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1em;
    }

    .btn-cancel {
      background: #eee;
    }

    .btn-whatsapp {
      background: #25d366;
      color: white;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

  <!-- WhatsApp icon (trigger) -->
  <button id="whatsappIcon">ðŸ“² WhatsApp Checkout</button>

  <!-- Overlay & Modal -->
<!-- Overlay & Modal -->
<div class="overlay" id="modalOverlay">
  <div class="modal">
    <h2 id="modalProductName">Product Name</h2>
    <p>Quick checkout via WhatsApp</p>

    <div class="section">
      <label><b>Brand:</b> <span id="modalBrand"></span></label><br>
      <label><b>Category:</b> <span id="modalCategory"></span></label>
    </div>

    <div class="section">
      <span id="modalSize"></span> â€” 
      <span id="modalPrice"></span>
    </div>

    <div class="section">
      <input type="text" id="modalFullName" placeholder="Full Name">
      <input type="text" id="modalLocation" placeholder="Delivery Location">
    </div>

    <div class="actions">
      <button class="btn btn-cancel" id="cancelBtn">Cancel</button>
      <button class="btn btn-whatsapp" id="placeOrderBtn">
        Place WhatsApp Order
      </button>
    </div>
  </div>
</div>

<script>
    function showPopup(icon) {
  // find the parent product card
  const productCard = icon.closest(".product-card");

  // get product data from dataset
  const name = productCard.dataset.name;
  const price = productCard.dataset.price;
  const size = productCard.dataset.size;
  const type = productCard.dataset.type;  // category/type
  const image = productCard.dataset.image;

  // inject into modal
  document.getElementById("modalProductName").textContent = name;
  document.getElementById("modalPrice").textContent = "KES " + price;
  document.getElementById("modalSize").textContent = size;
  document.getElementById("modalBrand").textContent = name.split(" ")[0]; // crude brand extraction
  document.getElementById("modalCategory").textContent = type;

  // show modal
  document.getElementById("modalOverlay").style.display = "flex";

  // attach WhatsApp order link
  document.getElementById("placeOrderBtn").onclick = () => {
    const fullName = document.getElementById("modalFullName").value;
    const location = document.getElementById("modalLocation").value;

    const message = `Hello, I want to order:\n\n${name}\nSize: ${size}\nPrice: KES ${price}\n\nCustomer: ${fullName}\nLocation: ${location}`;
    
    const url = "https://wa.me/254700000000?text=" + encodeURIComponent(message);
    window.open(url, "_blank");
  };
}

// close modal
document.getElementById("cancelBtn").addEventListener("click", () => {
  document.getElementById("modalOverlay").style.display = "none";
});

document.getElementById("modalOverlay").addEventListener("click", (e) => {
  if (e.target === document.getElementById("modalOverlay")) {
    document.getElementById("modalOverlay").style.display = "none";
  }
});

</script>
</body>
</html>

